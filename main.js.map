{"version":3,"sources":["src/scripts/app.js","src/scripts/constants.js","src/scripts/main.js","src/scripts/polyfills.js","src/scripts/utils.js"],"names":["darkBodyStyle","backgroundColor","colors","spaceGrey","color","white","lightBodyStyle","grey","redBodyStyle","fireEngineRed","App","controller","ScrollMagic","Controller","scenes","figureVideos","tweens","handleMouseenterVideo","handleMouseenterFigureVideo","bind","handleMouseleaveVideo","handleMouseleaveFigureVideo","buildScenes","forceStartAutoplayVideos","registerFigureVideos","heroTrigger","featuredWorkHeaderTrigger","cubeSectionTrigger","tweenBodyFromDarkToLight","TweenLite","fromTo","document","body","cubeSliderTimeline","TimelineLite","top","hero","Scene","triggerElement","reverse","triggerHook","setClassToggle","addScene","featuredWorkHeader","cubeSection","duration","setTween","setPin","querySelectorAll","forEach","video","autoplay","play","Array","prototype","call","addEventListener","e","target","querySelector","classList","add","remove","module","exports","require","init","Element","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","s","ownerDocument","i","length","item","findAncestor","el","sel","closest","parentElement"],"mappings":"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","file":"public/main.js","sourcesContent":["'use strict';\n\n// Libs\nimport CSSPlugin from 'gsap/CSSPlugin';\nimport EasePack from 'gsap/EasePack';\nimport TweenLite from 'gsap/TweenLite';\nimport TimelineLite from 'gsap/TimelineLite';\nimport ScrollMagic from 'scrollmagic';\nimport 'scrollmagic/scrollmagic/uncompressed/plugins/animation.gsap';\n// import 'scrollmagic/scrollmagic/uncompressed/plugins/debug.addIndicators';\n\n// Utils\nimport { findAncestor } from 'utils';\nimport { colors } from 'constants';\n\n// Local constants\nconst darkBodyStyle = {\n  backgroundColor: colors.spaceGrey,\n  color: colors.white\n};\nconst lightBodyStyle = {\n  backgroundColor: colors.grey,\n  color: colors.spaceGrey\n};\nconst redBodyStyle = {\n  backgroundColor: colors.fireEngineRed,\n  color: colors.white\n};\n\n/*\n* App class is the base controller for the app.\n*/\nclass App {\n  constructor() {\n    // Properties\n    this.controller = new ScrollMagic.Controller();\n    this.scenes = {};\n    this.figureVideos = [];\n    this.tweens = {};\n\n    // Event handlers\n    this.handleMouseenterVideo = this.handleMouseenterFigureVideo.bind(this);\n    this.handleMouseleaveVideo = this.handleMouseleaveFigureVideo.bind(this);\n  }\n\n  /*\n  * Used to initialize the application. Only call this once the DOM is ready.\n  */\n  init() {\n    this.buildScenes();\n    this.forceStartAutoplayVideos();\n    this.registerFigureVideos();\n  }\n\n  /*\n  * Creates scroll-based animations for each section.\n  */\n  buildScenes() {\n    // Trigger constants\n    const heroTrigger = '#hero';\n    const featuredWorkHeaderTrigger = '#featuredWorkHeader';\n    const cubeSectionTrigger = '#cubeSection';\n\n    // Tween constants\n    const tweenBodyFromDarkToLight = TweenLite.fromTo(document.body, 1, darkBodyStyle, lightBodyStyle);\n    const cubeSliderTimeline = new TimelineLite();\n    cubeSliderTimeline.fromTo('#slide2', 1, { top: '100%' }, { top: 0 });\n    cubeSliderTimeline.fromTo('#slide3', 1, { top: '100%' }, { top: 0 });\n\n    // Hero section\n    this.scenes.hero = [\n      // Caption fade/rise-in\n      new ScrollMagic.Scene({\n        triggerElement: heroTrigger,\n        reverse: false,\n        triggerHook: 1\n      })\n        .setClassToggle('#heroHeadline', 'active'),\n      // Globe fade-in\n      new ScrollMagic.Scene({\n        triggerElement: heroTrigger,\n        reverse: false,\n        triggerHook: 1\n      })\n        .setClassToggle('#heroImage', 'active')\n    ];\n    this.controller.addScene(this.scenes.hero);\n\n    // Featured Work header section\n    this.scenes.featuredWorkHeader = [\n      // \"Featured Work\" intro fade/rise-in\n      new ScrollMagic.Scene({\n        triggerElement: featuredWorkHeaderTrigger,\n        reverse: false,\n        triggerHook: 0.8\n      })\n        .setClassToggle('#featuredWorkHeaderCaption', 'active'),\n      // ISS image fade/swoop-in\n      new ScrollMagic.Scene({\n        triggerElement: featuredWorkHeaderTrigger,\n        reverse: false,\n        triggerHook: 0.8\n      })\n        .setClassToggle('#featuredWorkHeaderFigure', 'active')\n    ];\n    this.controller.addScene(this.scenes.featuredWorkHeader);\n\n    // Cube section\n    this.scenes.cubeSection = [\n      // Background color transition\n      new ScrollMagic.Scene({\n        triggerElement: cubeSectionTrigger,\n        triggerHook: 0.8,\n        duration: '60%'\n      })\n        .setTween(tweenBodyFromDarkToLight),\n      // Vertical cube slider\n      new ScrollMagic.Scene({\n        triggerElement: cubeSectionTrigger,\n        triggerHook: 0,\n        duration: '200%'\n      })\n        .setPin(cubeSectionTrigger)\n        .setTween(cubeSliderTimeline)\n    ];\n    this.controller.addScene(this.scenes.cubeSection);\n  }\n\n  /*\n  * Forces all autoplay videos to start.\n  */\n forceStartAutoplayVideos() {\n    document.querySelectorAll('video').forEach(video => {\n      if (video.autoplay) {\n        video.play();\n      }\n    });\n  }\n\n  /*\n  * Registers featured work <figure>s.\n  */\n  registerFigureVideos() {\n    this.figureVideos = document.querySelectorAll('.featuredWorkFigure video');\n    Array.prototype.forEach.call(this.figureVideos, video => {\n      video.addEventListener('mouseenter', this.handleMouseenterFigureVideo);\n      video.addEventListener('mouseleave', this.handleMouseleaveFigureVideo);\n    });\n  }\n\n  /*\n  * Handles mouse enter event on a <figure> <video>.\n  * @param {Event} e - Mouseenter event object.\n  */\n  handleMouseenterFigureVideo(e) {\n    findAncestor(e.target, '.featuredWorkFigure').querySelector('figcaption').classList.add('secondary');\n  }\n\n  /*\n  * Handles mouse leave event on a <figure> <video>.\n  * @param {Event} e - Mouseleave event object.\n  */\n  handleMouseleaveFigureVideo(e) {\n    findAncestor(e.target, '.featuredWorkFigure').querySelector('figcaption').classList.remove('secondary');\n  }\n}\n\nmodule.exports = new App();\n","module.exports = {\n  colors: {\n    fireEngineRed: '#CF1016',\n    grey: '#D7D2CB',\n    spaceGrey: '#25282A',\n    white: '#FFFFFF'\n  }\n};\n","'use strict';\n\nconst App = require('app');\n\nApp.init();\n","if (!Element.prototype.matches) {\n  Element.prototype.matches =\n    Element.prototype.matchesSelector ||\n    Element.prototype.mozMatchesSelector ||\n    Element.prototype.msMatchesSelector ||\n    Element.prototype.oMatchesSelector ||\n    Element.prototype.webkitMatchesSelector ||\n    function(s) {\n      var matches = (this.document || this.ownerDocument).querySelectorAll(s),\n        i = matches.length;\n      while (--i >= 0 && matches.item(i) !== this) {}\n      return i > -1;\n    };\n}\n","function findAncestor(el, sel) {\n  if (typeof el.closest === 'function') {\n    return el.closest(sel) || null;\n  }\n  while (el) {\n    if (el.matches(sel)) {\n      return el;\n    }\n    el = el.parentElement;\n  }\n  return null;\n}\n\nmodule.exports = { findAncestor };\n"]}