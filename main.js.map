{"version":3,"sources":["src/scripts/constants.js","src/scripts/homepage.js","src/scripts/main.js","src/scripts/polyfills.js","src/scripts/utils.js"],"names":["module","exports","BREAKPOINTS","DESKTOP_S","COLORS","FIRE_ENGINE_RED","GREY","SPACE_GREY","WHITE","DARK_BODY_STYLE","backgroundColor","color","LIGHT_BODY_STYLE","ACTIVE_CLASS","LIGHT_SECTION_SPACER_CLASS","CUBE_SLIDER_SELECTOR","CUBE_SLIDER_SLIDE_CONTENT_SELECTOR","CUBE_SLIDER_SLIDE_SELECTOR","CUBE_SLIDER_TRACK_SELECTOR","FEATURED_WORK_HEADER_SELECTOR","GLOBE_SELECTOR","HERO_SELECTOR","LIGHT_SECTION_SELECTOR","LIGHT_SECTION_SPACER_SELECTOR","Homepage","controller","ScrollMagic","Controller","scenes","figureVideos","debouncedHandleResize","handleResize","bind","handleEnterCubeSliderScene","handleMouseenterVideo","handleMouseenterFigureVideo","handleMouseleaveVideo","handleMouseleaveFigureVideo","globeEl","document","querySelector","heroEl","buildStaticScenes","registerFigureVideos","window","addEventListener","classList","add","hero","Scene","reverse","triggerElement","triggerHook","setClassToggle","addScene","featuredWorkHeader","darkToLight","duration","setTween","TweenLite","fromTo","body","getGlobeSceneDuration","start","end","globe","offset","y","ease","Power0","easeNone","slides","querySelectorAll","slideCount","length","sliderSceneOptions","timeline","TimelineLite","slideIndex","toVars","top","to","cubeSlider","setPin","spacerClass","on","unpinSlides","destroy","buildGlobeScene","shouldBuildCubeSlider","buildCubeSliderScenes","registerSliderVideos","Array","prototype","forEach","call","video","forcePlay","sliderVideos","currentTime","e","rebuildGlobeScene","rebuildCubeSliderScenes","state","pinSlides","target","remove","heroDimensions","getBoundingClientRect","height","globeDimensions","videos","autoplay","play","innerWidth","slider","sliderDimentions","slideContent","slide","style","left","width","require","initialize","Element","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","s","ownerDocument","i","item","checkForElement","selector","callback","element","contains","requestAnimationFrame","setTimeout","findAncestor","el","closest","parentElement"],"mappings":"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","file":"public/main.js","sourcesContent":["module.exports = {\n  BREAKPOINTS: {\n    DESKTOP_S: 1024\n  },\n  COLORS: {\n    FIRE_ENGINE_RED: '#CF1016',\n    GREY: '#D6D0C8',\n    SPACE_GREY: '#25282A',\n    WHITE: '#FFFFFF'\n  }\n};\n","'use strict';\n\n// Libs\nimport CSSPlugin from 'gsap/CSSPlugin';\nimport EasePack from 'gsap/EasePack';\nimport TweenLite from 'gsap/TweenLite';\nimport TimelineLite from 'gsap/TimelineLite';\nimport ScrollMagic from 'scrollmagic';\nimport 'scrollmagic/scrollmagic/uncompressed/plugins/animation.gsap';\nimport debounce from 'lodash/debounce';\n\n// Utils\nimport { checkForElement, findAncestor } from 'utils';\nimport { BREAKPOINTS, COLORS } from 'constants';\n\n// Local constants\n// Styles\nconst DARK_BODY_STYLE = {\n  backgroundColor: COLORS.SPACE_GREY,\n  color: COLORS.WHITE\n};\nconst LIGHT_BODY_STYLE = {\n  backgroundColor: COLORS.GREY,\n  color: COLORS.SPACE_GREY\n};\n// Classes\nconst ACTIVE_CLASS = 'active';\nconst LIGHT_SECTION_SPACER_CLASS = 'lightSectionSpacer';\n// Selectors\nconst CUBE_SLIDER_SELECTOR = '#cubeSlider';\nconst CUBE_SLIDER_SLIDE_CONTENT_SELECTOR = '.Cube-slider-slide-content';\nconst CUBE_SLIDER_SLIDE_SELECTOR = `${CUBE_SLIDER_SELECTOR} .Cube-slider-slide`;\nconst CUBE_SLIDER_TRACK_SELECTOR = `${CUBE_SLIDER_SELECTOR} .Cube-slider-track`;\nconst FEATURED_WORK_HEADER_SELECTOR = '#featuredWorkHeader';\nconst GLOBE_SELECTOR = '#globe';\nconst HERO_SELECTOR = '#hero';\nconst LIGHT_SECTION_SELECTOR = '#lightSection';\nconst LIGHT_SECTION_SPACER_SELECTOR = `.${LIGHT_SECTION_SPACER_CLASS}`;\n\n/*\n* Homepage class is the base controller for the homepage.\n*/\nclass Homepage {\n  constructor() {\n    // Properties\n    this.controller = new ScrollMagic.Controller();\n    this.scenes = {};\n    this.figureVideos = [];\n\n    // Event handlers\n    this.debouncedHandleResize = debounce(this.handleResize.bind(this), 150);\n    this.handleEnterCubeSliderScene = this.handleEnterCubeSliderScene.bind(this);\n    this.handleMouseenterVideo = this.handleMouseenterFigureVideo.bind(this);\n    this.handleMouseleaveVideo = this.handleMouseleaveFigureVideo.bind(this);\n  }\n\n  // Methods\n  // -------\n\n  /*\n  * Used to initialize the application. Only call this once the DOM is ready.\n  */\n  initialize() {\n    // Cache common elements\n    this.globeEl = document.querySelector(GLOBE_SELECTOR);\n    this.heroEl = document.querySelector(HERO_SELECTOR);\n\n    // Build scenes\n    this.buildStaticScenes();\n\n    // Register videos\n    this.registerFigureVideos();\n\n    // Setup resize listener\n    this.handleResize();\n    window.addEventListener('resize', this.debouncedHandleResize);\n\n    // Add active class to globe (in case the animation didn't activate)\n    this.globeEl.classList.add('active');\n  }\n\n  /*\n  * Creates scroll-based animations for static section.\n  */\n  buildStaticScenes() {\n    // Caption fade/rise-in\n    this.scenes.hero = new ScrollMagic.Scene({\n      reverse: false,\n      triggerElement: HERO_SELECTOR,\n      triggerHook: 1\n    }).setClassToggle('#heroHeadline', ACTIVE_CLASS);\n    this.controller.addScene(this.scenes.hero);\n\n    // Featured Work header section\n    this.scenes.featuredWorkHeader = [\n      // \"Featured Work\" intro fade/rise-in\n      new ScrollMagic.Scene({\n        reverse: false,\n        triggerElement: FEATURED_WORK_HEADER_SELECTOR,\n        triggerHook: 0.8\n      })\n        .setClassToggle('#featuredWorkHeaderCaption', ACTIVE_CLASS),\n      // ISS image fade/swoop-in\n      new ScrollMagic.Scene({\n        reverse: false,\n        triggerElement: FEATURED_WORK_HEADER_SELECTOR,\n        triggerHook: 0.8\n      })\n        .setClassToggle('#featuredWorkHeaderFigure', ACTIVE_CLASS)\n    ];\n    this.controller.addScene(this.scenes.featuredWorkHeader);\n\n    // Dark to light transition\n    this.scenes.darkToLight = new ScrollMagic.Scene({\n      duration: 320,\n      triggerElement: LIGHT_SECTION_SELECTOR,\n      triggerHook: 'onEnter'\n    }).setTween(TweenLite.fromTo(document.body, 1, DARK_BODY_STYLE, LIGHT_BODY_STYLE));\n    this.controller.addScene(this.scenes.darkToLight);\n  }\n\n  /*\n  * Creates the scene for the globe rise-up animation.\n  */\n  buildGlobeScene() {\n    const duration = this.getGlobeSceneDuration() * 1.05;\n    const start = 12;\n    // (% end position) = ((% globe size / % animation length) * 100%) - (% start position)\n    const end = (150 / 195 * 100) - start;\n    this.scenes.globe = new ScrollMagic.Scene({\n      duration,\n      offset: -60,\n      reverse: true,\n      triggerElement: GLOBE_SELECTOR,\n      triggerHook: 'onEnter'\n    })\n      .setClassToggle('#globeImage', ACTIVE_CLASS)\n      .setTween(TweenLite.fromTo('#globeContainer', 1, { y: `-${start}%` }, { y: `-${end}%`, ease: Power0.easeNone }))\n    this.controller.addScene(this.scenes.globe);\n  }\n\n  /*\n  * Creates the scene for the cube slider.\n  */\n  buildCubeSliderScenes() {\n    const slides = document.querySelectorAll(CUBE_SLIDER_SLIDE_SELECTOR);\n    const slideCount = slides.length;\n    const sliderSceneOptions = {\n      triggerElement: LIGHT_SECTION_SELECTOR,\n      triggerHook: 'onLeave',\n      duration: `${slideCount - 1}00%`\n    };\n    const timeline = new TimelineLite();\n\n    // Add slides to the timeline.\n    let slideIndex = 0;\n    while (slideIndex < slideCount - 1) {\n      const toVars = {\n        top: `-${(slideIndex + 1) * 100}%`\n      };\n      timeline.to(CUBE_SLIDER_TRACK_SELECTOR, 1, toVars);\n      slideIndex++;\n    }\n\n    // Create slider scene.\n    this.scenes.cubeSlider = new ScrollMagic.Scene(sliderSceneOptions)\n      .setPin(LIGHT_SECTION_SELECTOR, { spacerClass: LIGHT_SECTION_SPACER_CLASS })\n      .setTween(timeline)\n      .on('enter', this.handleEnterCubeSliderScene)\n      .on('leave destroy', e => { this.unpinSlides(slides); });\n    this.controller.addScene(this.scenes.cubeSlider);\n  }\n\n  /*\n  * Rebuilds globe scene.\n  */\n  rebuildGlobeScene() {\n    if (this.scenes.globe) {\n      this.scenes.globe = this.scenes.globe.destroy(true);\n    }\n    if (!this.scenes.globe) {\n      this.buildGlobeScene();\n    }\n  }\n\n  /*\n  * Rebuilds cube slider scenes.\n  */\n  rebuildCubeSliderScenes() {\n    // Destroy it if it exists.\n    if (this.scenes.cubeSlider) {\n      this.scenes.cubeSlider = this.scenes.cubeSlider.destroy(true);\n    }\n    // Create it if we are in desktop mode and it does not already exist.\n    if (this.shouldBuildCubeSlider()) {\n      this.buildCubeSliderScenes();\n    }\n    // Make videos play.\n    this.registerSliderVideos();\n  }\n\n  /*\n  * Registers featured work <figure>s.\n  */\n  registerFigureVideos() {\n    this.figureVideos = document.querySelectorAll('.featuredWorkFigure video');\n    if (this.figureVideos.length > 0) {\n      Array.prototype.forEach.call(this.figureVideos, video => {\n        video.addEventListener('mouseenter', this.handleMouseenterFigureVideo);\n        video.addEventListener('mouseleave', this.handleMouseleaveFigureVideo);\n      });\n    }\n    this.forcePlay(this.figureVideos);\n  }\n\n  /*\n  * Registers cube slider videos.\n  */\n  registerSliderVideos() {\n    this.sliderVideos = document.querySelectorAll(`${CUBE_SLIDER_SLIDE_SELECTOR} video`);\n    if (this.sliderVideos.length > 0) {\n      Array.prototype.forEach.call(this.sliderVideos, video => {\n        video.currentTime = 0;\n      });\n    }\n    this.forcePlay(this.sliderVideos);\n  }\n\n  // Event handlers\n  // --------------\n\n  /*\n  * Handles window resizing.\n  * @param {Event} e - Window resize event.\n  */\n  handleResize(e) {\n    this.rebuildGlobeScene();\n    this.rebuildCubeSliderScenes();\n  }\n\n  /*\n  * Handles entering the cube slider scene.\n  * @param {Event} e - ScrollMagic \"enter\" event object.\n  */\n  handleEnterCubeSliderScene(e) {\n    if (!this.scenes.cubeSlider) {\n      return;\n    }\n    if (this.scenes.cubeSlider.state() === 'DURING') {\n      checkForElement(LIGHT_SECTION_SPACER_SELECTOR, this.pinSlides);\n    } else {\n      this.pinSlides();\n    }\n  }\n\n  /*\n  * Handles mouse enter event on a <figure> <video>.\n  * @param {Event} e - Mouseenter event object.\n  */\n  handleMouseenterFigureVideo(e) {\n    findAncestor(e.target, '.featuredWorkFigure').querySelector('figcaption').classList.add('secondary');\n  }\n\n  /*\n  * Handles mouse leave event on a <figure> <video>.\n  * @param {Event} e - Mouseleave event object.\n  */\n  handleMouseleaveFigureVideo(e) {\n    findAncestor(e.target, '.featuredWorkFigure').querySelector('figcaption').classList.remove('secondary');\n  }\n\n  // Helpers\n  // -------\n\n  /*\n  * Gets the duration for the globe scene.\n  * @returns {Number} - Number of pixels to run the scene.\n  */\n  getGlobeSceneDuration() {\n    let duration = 0;\n    if (this.heroEl) {\n      const heroDimensions = this.heroEl.getBoundingClientRect();\n      duration += heroDimensions.height;\n    }\n    if (this.globeEl) {\n      const globeDimensions = this.globeEl.getBoundingClientRect();\n      duration += globeDimensions.height;\n    }\n    return duration;\n  }\n\n  /*\n  * Forces HTML5 videos to start playing.\n  * @param {NodeList} videos - List of videos to play.\n  */\n  forcePlay(videos) {\n    if (videos.length > 0) {\n      Array.prototype.forEach.call(videos, video => {\n        if (video.autoplay) {\n          video.play();\n        }\n      });\n    }\n  }\n\n  /*\n  * Determines if the cube slider should be built.\n  * @returns {Boolean} - Flag indicating whether to build the slider.\n  */\n  shouldBuildCubeSlider() {\n    if (window.innerWidth >= BREAKPOINTS.DESKTOP_S && !this.scenes.cubeSlider) {\n      return true;\n    }\n    return false;\n  }\n\n  /*\n  * Pins slides in place.\n  * @param {NodeList} slides - List of slide nodes\n  */\n  pinSlides(slides) {\n    if (!slides) {\n      slides = document.querySelectorAll(CUBE_SLIDER_SLIDE_SELECTOR);\n    }\n    if (slides.length > 0) {\n      let slider = document.querySelector(CUBE_SLIDER_SELECTOR);\n      const sliderDimentions = slider.getBoundingClientRect();\n      Array.prototype.forEach.call(slides, slide => {\n        const slideContent = slide.querySelector(CUBE_SLIDER_SLIDE_CONTENT_SELECTOR);\n        slideContent.classList.add(ACTIVE_CLASS);\n        slideContent.style.top = `${sliderDimentions.top}px`;\n        slideContent.style.left = `${sliderDimentions.left}px`;\n        slideContent.style.width = `${sliderDimentions.width}px`;\n        slideContent.style.height = `${sliderDimentions.height}px`;\n      });\n    }\n  }\n\n  /*\n  * Unpins slides.\n  * @param {NodeList} slides - List of slide nodes\n  */\n  unpinSlides(slides) {\n    if (!slides) {\n      slides = document.querySelectorAll(CUBE_SLIDER_SLIDE_SELECTOR);\n    }\n    if (slides.length > 0) {\n      Array.prototype.forEach.call(slides, slide => {\n        const slideContent = slide.querySelector(CUBE_SLIDER_SLIDE_CONTENT_SELECTOR);\n        slideContent.classList.remove(ACTIVE_CLASS);\n        slideContent.style.top = '';\n        slideContent.style.left = '';\n        slideContent.style.width = '';\n        slideContent.style.height = '';\n      });\n    }\n  }\n}\n\nmodule.exports = new Homepage();\n","'use strict';\n\nconst Homepage = require('homepage');\n\n// Remove static class from body.\ndocument.body.classList.remove('static');\n\n// Add onLoad event listener.\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  Homepage.initialize();\n});\n","if (!Element.prototype.matches) {\n  Element.prototype.matches =\n    Element.prototype.matchesSelector ||\n    Element.prototype.mozMatchesSelector ||\n    Element.prototype.msMatchesSelector ||\n    Element.prototype.oMatchesSelector ||\n    Element.prototype.webkitMatchesSelector ||\n    function(s) {\n      var matches = (this.document || this.ownerDocument).querySelectorAll(s),\n        i = matches.length;\n      while (--i >= 0 && matches.item(i) !== this) {}\n      return i > -1;\n    };\n}\n","/*\n* Checks if an element exists in the DOM.\n* @param {String} selector - Selector used to find the desired element.\n* @param {Function} callback - Function to run once the element exists.\n*/\nfunction checkForElement(selector, callback) {\n  const element = document.querySelector(selector);\n  if (!document.contains(element)) {\n    window.requestAnimationFrame(checkForElement);\n  } else {\n    setTimeout(callback, 0);\n  }\n}\n\n/*\n* Finds the next closest sibling element.\n* @param {Element} el - Element to start searching from.\n* @param {String} selector - Selector of the element to find.\n* @returns {Element|Null} - Ancestor element.\n*/\nfunction findAncestor(el, selector) {\n  if (typeof el.closest === 'function') {\n    return el.closest(selector) || null;\n  }\n  while (el) {\n    if (el.matches(selector)) {\n      return el;\n    }\n    el = el.parentElement;\n  }\n  return null;\n}\n\nmodule.exports = {\n  checkForElement,\n  findAncestor\n};\n"]}